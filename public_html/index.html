<!DOCTYPE html>
<html>
    <head>
        <title>Web Page </title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
        <script src="https:/maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.1/bootstrap-table.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.1/bootstrap-table.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.1/locale/bootstrap-table-zh-CN.min.js"></script>
    </head>
    <body>
        <div class="container">
            <p></p>
            <div class="well">Web Page</div>
            <div class="row">
                <div class="col-xs-6"><div class="well"> <button id="btn_get">GET</button></div></div>
                <div class="col-xs-6"><div class="well"> <button id="btn_post">POST</button></div></div>
                <div class="col-xs-6"><div class="well"> <button id="btn_xml">Get XML Table</button></div></div>                
            </div>
            <div>
                <table id="table"></table>                          
            </div>
        </div>
        
    <script>
        $('#btn_xml').click(function(){ 
            $.ajax({  
                type: "GET",  
                url:"http://localhost:3333/home/getMessage", 
                dataType:"json",
                success: function(data){  
                    alert("Success:\n"); 
                    var table_data =data;
                    $('#table').bootstrapTable({
                        columns: [{
                                    field: 'author',
                                    title: 'author'
                                    }, {
                                        field: 'created',
                                        title: 'created'
                                    }, {
                                        field: 'id',
                                        title: 'id'
                                    },{
                                        field: 'message',
                                        title: 'message'
                                    }],
                                    data: table_data
                                });
                        },  
                error: function(data){  
                    alert('Error: ' + data);  
                }  
            });
        });    
        
        $('#btn_get').click(function(){
             $.ajax({  
                type: "GET",  
                url:"http://localhost:3333/home/1", 
                dataType:"json",
                success: function(data){  
                  alert("Success:\n '" + "author is " +data.author + ",message is " +data.message);  
                },  
                error: function(data){  
                  alert('Error: ' + data);  
                }  
            }); 
        });

        $('#btn_post').click(function(){
            var JSONObject= {
                "author": "apple_8:13pm",
                "created": 0813,
                "message": "hello_8:13pm"
            };
            $.ajax({  
                url:'http://localhost:3333/home/postMessage',  
                type:'POST',
                contentType: 'application/json', 
                data :  JSON.stringify(JSONObject),      
                dataType: 'JSON',
                success: function(data) { 
                    alert("success");
                    var jsonData = $.parseJSON(data); //if data is not json
                    $('#author').val(jsonData.author);  
                    $('#created').val(jsonData.created); 
                    $('#message').val(jsonData.message);  
                },
                failure: function(errMsg) {
                    alert(errMsg);
                }
                });  
            });
    </script>
    </body>
</html>
