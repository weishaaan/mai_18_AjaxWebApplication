<!doctype html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html">
    <title>Ajax test</title>
    <meta http-equiv="Access-Control-Allow-Origin" content="*”>
    <meta name="author" content="Jake Rocheleau">
    <link rel="shortcut icon" href="http://d15dxvojnvxp1x.cloudfront.net/assets/favicon.ico">
    <link rel="icon" href="http://d15dxvojnvxp1x.cloudfront.net/assets/favicon.ico">
    <link rel="stylesheet" type="text/css" media="all" href="css/styles.css">
    
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src='script/script.js' type='text/javascript'></script>
    

</head>

<body>
  <div id="w">
    <h1>Simple Ajax test </h1> 
    <div>
    <button id="list_btn" >Click me to show the list of batch files</button>
    <div id="dvContentul"></div>
   <!--GET JSON DATA
    <script>
        $('#list_btn').click(function(){ 
         $.ajax({  
           type: "GET",  
           url:"http://localhost:2222/home/1", 
           dataType:"json",
           headers: {
                Accept:"application/json",
                "Access-Control-Allow-Origin": "*"
           },
           success: function(data){  
             // we have the response  
             console.log(data)
             alert("Success:\n '" + data.author + "'");  
           },  
           error: function(data){  
             console.log(data)
             alert('Error121212: ' + data);  
           }  
         });
    });    
    </script>
-->
    <script>
        $('#list_btn').click(function(){ 
         $.ajax({  
           type: "GET",  
           url:"http://localhost:2222/home", 
           dataType:"xml",
           headers: {
                Accept:"application/xml",
                "Access-Control-Allow-Origin": "*"
           },
           success: function(data){  
                $(data).find('messages').each(function(){
                    var author = $(this).find('message').find('author').text();
                    var message = $(this).find('message').find('message').text();
                    $("<li></li>").html("author is :" + author + ", message is :" + message).appendTo("#dvContentul");
                }); 
                alert("Success:\n " + data);  
           },  
           error: function(data){  
             alert('Error: ' + data);  
           }  
         });
    });    
    </script>


    <button id="ok" >post Json</button>
    
    <script type="text/javascript">
    $(document).ready(function(){  
    $('#ok').click(function(){  
        //var Msg="abc";
        //document.getElementById('msg').value = Msg;
   
        var JSONObject= {
            "author": "apple5",
            "created": 1463919419804,
            "message": "hello5"
        };
        $.ajax({  
            url:'http://localhost:2222/home',  
            type:'POST',
            contentType: 'application/json', 
            data :  JSON.stringify(JSONObject),      
            dataType: 'JSON',
            success: function(data) { 
                alert("success");
                var jsonData = $.parseJSON(data); //if data is not json
                $('#author').val(jsonData.author);  
                $('#created').val(jsonData.created); 
                $('#message').val(jsonData.message);  
            },
            failure: function(errMsg) {
                alert(errMsg);
            }
            });  
        });  
    }); 
</script> 

    <script type="text/javascript">
        $(document).ready(function(){  
        $('#ok').click(function(){  
            var xmlData= "<message><author>2222apple___post__ajax</author><created>2016-05-22T22:02:48.009+02:00</created><message>hello___post__ajax</message></message>";
            $.ajax({  
                url:'http://localhost:2222/home',  
                type:'POST',
                contentType: 'application/xml', 
                dataType: 'xml',
                data:xmlData,
                success: function(data) { 
                    alert("XML:it works!"+ data);
                },
                failure: function(errMsg) {
                    alert("error: " + errMsg);
                }
                });  
            });  
        }); 

    </script> 
</body>
</html>










