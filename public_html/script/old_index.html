<!doctype html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html">
    <title>Ajax test</title>
    <meta http-equiv="Access-Control-Allow-Origin" content="*”>
    <meta name="author" content="Liz">
    <link rel="shortcut icon" href="http://d15dxvojnvxp1x.cloudfront.net/assets/favicon.ico">
    <link rel="icon" href="http://d15dxvojnvxp1x.cloudfront.net/assets/favicon.ico">

    <link rel="icon" href="data:;base64,=">
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src='script/script.js' type='text/javascript'></script>
    <link rel="stylesheet" href="https://cdn.rawgit.com/twbs/bootstrap/v4-dev/dist/css/bootstrap.css" integrity="sha384-XXXXXXXX" crossorigin="anonymous">
    <script src="https://cdn.rawgit.com/twbs/bootstrap/v4-dev/dist/js/bootstrap.js" integrity="sha384-XXXXXXXX" crossorigin="anonymous"></script>
</head>

<body>
  <div id="w">
    <h1>Simple Ajax test </h1> 
    <div>
    <button type="button" onclick="getXML()">Get XML Table</button>
    <div id="xmlTable"></div>
    <button id="list_btn" >send GET request to web service</button>
    <script>
        function getXML() {
          var xmlhttp = new XMLHttpRequest();
          xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
              myFunction(xmlhttp);
            }
          };
          xmlhttp.open("GET", "xml/batch_catalog.xml", true);
          xmlhttp.send();
        }
        function myFunction(xml) {
            var code,name,row,table,description,i,xmlDoc,row_code,row_name,row_description;
            xmlDoc = xml.responseXML;
            row = "";
            code = xmlDoc.getElementsByTagName("CODE");
            name = xmlDoc.getElementsByTagName("NAME");
            description = xmlDoc.getElementsByTagName("DESCRIPTION");
            table = "<table><tr> <td><b>CODE</b></td> <td><b>NAME</b></td> <td><b>DESCRIPTION</b></td> <td><b>EXECUTE</b></td></tr>";
        
            for (i = 0; i< code.length; i++) {
                //table += code[i].childNodes[0].nodeValue + "<br>";
                row_code = code[i].childNodes[0].nodeValue;
                row_name = name[i].childNodes[0].nodeValue;
                row_description = description[i].childNodes[0].nodeValue;
                row += "<tr> <td>" + row_code + "</td> <td>"+ 
                      row_name +"</td><td>"+
                      row_description +"</td>"+
                      "<td>"+"<input type=\"button\" name="+"\""+
                      row_name+"\""+"value=\"execute\""+
                      "onclick=load"+row_code+"()"+"/>"+
                      "</td></tr>";
              
                 //<td><input type="button" value="07M" name="exexBtn" onclick="loadBatXml07()"/></td>
                
        }
                table+=row + "</table>";
                document.getElementById("xmlTable").innerHTML = table;
        }
    </script>
  
 <div id="dvContentul"></div> 

    <script>
        $('#list_btn').click(function(){ 
            $.ajax({  
              type: "GET",  
              url:"http://localhost:3333/home/1", 
              dataType:"json",
              success: function(data){  
                // we have the response  
                console.log(data)
                alert("Success:\n '" + "author is " +data.author + ",message is " +data.message);  
              },  
              error: function(data){  
                console.log(data)
                alert('Error121212: ' + data);  
              }  
            });
    });    
    </script>


    <button id="ok" >send POST request to web service</button>

    <script type="text/javascript">
        $(document).ready(function(){  
        $('#ok').click(function(){  
            //var Msg="abc";
            //document.getElementById('msg').value = Msg;

            var JSONObject= {
                "author": "apple_26_Mai",
                "created": 1463919419804,
                "message": "hello_26_Mai"
            };
            $.ajax({  
                url:'http://localhost:3333/home/postMessage',  
                type:'POST',
                contentType: 'application/json', 
                data :  JSON.stringify(JSONObject),      
                dataType: 'JSON',
                success: function(data) { 
                    alert("success");
                    var jsonData = $.parseJSON(data); //if data is not json
                    $('#author').val(jsonData.author);  
                    $('#created').val(jsonData.created); 
                    $('#message').val(jsonData.message);  
                },
                failure: function(errMsg) {
                    alert(errMsg);
                }
                });  
            });  
        }); 
    </script> 

    
    <table id="table">
        <thead>
            <tr>
                <th data-field="id">Item ID</th>
                <th data-field="name">Item Name</th>
                <th data-field="price">Item Price</th>
            </tr>
        </thead>
    </table>
    <script>
        
        var data = [
        {
            "id": 0,
            "name": "test0",
            "price": "$0"
        },
        {
            "id": 1,
            "name": "test1",
            "price": "$1"
        },
        {
            "id": 2,
            "name": "test2",
            "price": "$2"
        },
        {
            "id": 3,
            "name": "test3",
            "price": "$3"
        },
        {
            "id": 4,
            "name": "test4",
            "price": "$4"
        },
        {
            "id": 5,
            "name": "test5",
            "price": "$5"
        }];

    $(function () {
        $('#table').bootstrapTable({
            data: data
        });
    });
    </script>
    
    <div class="container">
        <div>This container</div>
    </div>
</body>
</html>










